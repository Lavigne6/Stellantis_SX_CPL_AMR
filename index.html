<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choisir une version</title>
    <style>
        /* Styles pour l'image en haut */
        #movingImage {
            position: absolute;
            top: 0;
            display: none; /* Masquée par défaut */
            width: 100px;
            height: auto;
            cursor: pointer;
            transition: all 1s ease;
        }
    </style>
</head>
<body>
    <h1>Bienvenue chez Stellantis Sochaux !</h1>
    <p>Veuillez choisir la version de l'application :</p>

    <!-- Image avec déplacement aléatoire -->
    <img id="movingImage" src="Butler.jpg" alt="Image aléatoire" onclick="catchImage()">

    <!-- Normal Version -->
    <a href="https://apps.powerapps.com/play/1c66268e-c967-4e77-82e1-1e303906f884" id="normalVersionLink">
        <button>Version Powerapp (accès restreint)</button>
    </a>

    <!-- Lite Version -->
    <button onclick="showLite()">Version Lite</button>

    <!-- Auto dépannage Button -->
    <button onclick="autoDepannage()">Auto Dépannage</button>

    <!-- Lite Content (hidden by default) -->
    <div id="liteContent" style="display:none;">
        <h3 id="machineIDText">Hello, je suis : </h3>

        <ul>
            <li>Automated Mobile Robot (AMR)</li>
            <li>Développé par Quicktron</li>
            <li>Peut porter jusqu’à 1,5 tonnes</li>
            <li>Deux axes de déplacement X et Y</li>
            <li>Suivant un cheminement de QR codes (tags) au sol, lus par caméra</li>
            <li>Détection des obstacles par caméra et parechocs (pneumatiques)</li>
            <li>Se recharge sur des bornes électriques</li>
            <h3>Zones de déplacement</h3>
            <img src="Layout.png" alt="Image 1" width="500px">
            <p>Nous roulons sur les MV1/2/3/4/5, HC1 + toutes les zones de kit, jusqu'au TK!</p>
            <p>Distance maximale: 1km!</p>
        </ul>

        <ul>
            <h3>Les tags</h3>
            <img src="Photo_tag.jpeg" alt="Image 2" width="100px">
            <li>Vous voyez ces QR codes partout dans notre atelier?</li>
            <li>Ils servent à indiquer les chemins et la direction aux butler.</li>
        </ul>

        <h3>Contact</h3>
        <p><strong>Chef de projet :</strong></p>
        <p>Simon Poquet 0668241247</p>
        <p><strong>Techniciens :</strong></p>
        <p>Gary Marinot 0672831967, Sezer Binen 0637964422</p>
        <p><strong>Stagiaire :</strong></p>
        <p>Haiquan Liu 0669642070</p>
    </div>

    <script>
        // Fonction pour récupérer le paramètre URL "MachineID"
        function getQueryParam(param) {
            let urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Affichage de la version Lite avec MachineID personnalisé et image en mouvement
        function showLite() {
            var machineID = getQueryParam("MachineID");
            var machineNames = {
                35: "Seize",
                40: "Adil",
                42: "Lilouch",
                57: "Saoudi",
                58: "Emilie",
                66: "Haiquan",
                70: "Stéphane",
                81: "Merguez",
                83: "Mickael",
                88: "Guofeng",
                89: "Grincheu",
                98: "Rogerio",
                100: "Simon",
                102: "Le magicien",
                121: "Caro",
                128: "Sam",
                142: "Bayram",
                164: "Mickey"
            };

            var machineName = machineNames[machineID] || "MachineID inconnu";
            document.getElementById("machineIDText").innerHTML = "Hello, je suis : " + machineName + " Butler " + machineID + "!";
            document.getElementById("liteContent").style.display = "block";

            // Affiche et démarre le mouvement de l'image
            var image = document.getElementById("movingImage");
            image.style.display = "block";
            setInterval(moveImageRandomly, 2000);
        }

        // Fonction pour déplacer l'image de manière aléatoire
        function moveImageRandomly() {
            var image = document.getElementById("movingImage");
            var x = Math.random() * (window.innerWidth - 100);  // Déplacement sur toute la largeur
            var y = Math.random() * (window.innerHeight - 100); // Déplacement sur toute la hauteur
            image.style.left = x + "px";
            image.style.top = y + "px";
        }

        // Fonction pour capturer l'image et masquer
        function catchImage() {
            var image = document.getElementById("movingImage");
            image.style.display = "none";
        }

        // Fonction pour l'auto dépannage
        function autoDepannage() {
            // Options pour le dépannage
            var choix = prompt("Sélectionnez le type de problème:\n1. Lumière rouge\n2. Lumière bleue clignotante");

            // Rediriger selon le choix
            if (choix === "1") {
                window.location.href = "Leçon ponctuelle _ Lumière rouge.pdf";
            } else if (choix === "2") {
                window.location.href = "Leçon ponctuelle _ Lumière rouge.pdf";
            } else {
                alert("Choix invalide, veuillez réessayer.");
            }
        }

        // Dynamiser le lien pour la version normale
        window.onload = function() {
            var machineID = getQueryParam("MachineID");
            document.getElementById("normalVersionLink").href = "https://apps.powerapps.com/play/1c66268e-c967-4e77-82e1-1e303906f884?MachineID=" + machineID;
        }
    </script>
</body>
</html>
