<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choisir une version</title>
    <style>
	body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
	}
        /* Styles pour l'image en haut */
        #movingImage {
            position: absolute;
            top: 0;
            display: none; /* Masquée par défaut */
            width: 100px;
            height: auto;
            cursor: pointer;
            transition: all 1s ease;
        }
        /* Style pour la boîte de sélection */
        #depannageOptions {
            display: none; /* Masqué par défaut */
            margin-top: 20px;
        }
        /* Styles pour la boîte modale */
        #modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
	    overflow: auto;
        }
        #modalContent {
            background-color: white;
            padding: 20px;
            max-width: 500px;
            border-radius: 8px;
            text-align: center;
        }
        #modalContent h2 {
            color: red;
        }
        #modal img {
            max-width: 100%;
            height: auto;
            margin-top: 10px;
        }
	        /* Animation keyframes */
        @keyframes pulseEffect {
            0% {
                transform: scale(1); /* 初始大小 */
            }
            50% {
                transform: scale(1.5); /* 放大到110% */
            }
            100% {
                transform: scale(1); /* 返回原始大小 */
            }
        }

        /* 应用到标题的动画样式 */
        .animated-flash {
            display: inline-block;
            animation: pulseEffect 1.5s infinite; /* 动画持续时间1.5秒，无限循环 */
            transition: transform 0.2s ease-in-out; /* 平滑缩放过渡 */
            cursor: pointer;
            text-decoration: underline;
            color: red;
        }

        /* 悬停时放大效果 */
        .animated-flash:hover {
            transform: scale(1.15); /* 鼠标悬停时放大到115% */
            color: darkred; /* 改变颜色，增强交互感 */
        }
    </style>
</head>
<body>
    <!-- Boîte modale -->
    <div id="modal">
        <div id="modalContent">
            <h2>Attention !</h2>
	    <img src="butlerlidar.png" alt="Image d'avertissement 3"width="300px">
            <p><strong>SAUF EN CAS DE DANGER</strong><br>Ne pas couper la route d'un butler cela entraînera un arrêt d'urgence du robot !</p>
            <img src="Regle passage.png" alt="Image d'avertissement 1"width="300px">
            <p>Ne pas taper le bumper autour des butlers, cela entraînera également un arrêt d'urgence du robot !</p>
            <img src="bumper.png" alt="Image d'avertissement 2"width="300px">
            <button onclick="closeModal()" style="font-size: 18px; padding: 10px 20px;">J'ai pris en compte de ces infos</button>

        </div>
    </div>

    <h1>Bienvenue chez Stellantis Sochaux ! <img src="Logo_stellantis.png" alt="Image 3" width="100px"> </h1>

    <!-- Image avec déplacement aléatoire -->
    <img id="movingImage" src="Butler.jpg" alt="Image aléatoire" onclick="catchImage()">

    <!-- Normal Version -->
    <a href="https://apps.powerapps.com/play/1c66268e-c967-4e77-82e1-1e303906f884" id="normalVersionLink">
        <button>Version Powerapp (accès restreint)</button>
    </a>

    <!-- Auto dépannage Button -->
    <button onclick="showDepannageOptions()">Auto Dépannage</button>

    <!-- Sélection dépannage -->
    <div id="depannageOptions">
        <label for="problemSelect">Sélectionnez le type de problème :</label>
        <select id="problemSelect">
            <option value="">-- Choisir une option --</option>
            <option value="1">Lumière rouge</option>
            <option value="2">Lumière jaune violette</option>
	    <option value="3">Lumière bleue</option>
		
        </select>
        <button onclick="handleDepannage()">Aller</button>
    </div>

    <!-- Lite Content (visible par défaut) -->
    <div id="liteContent">
        <h3 id="machineIDText">Hello, je suis : </h3>

        <ul>
            <li>Automated Mobile Robot (AMR)</li>
            <li>Développé par Quicktron</li>
            <li>Peut porter jusqu’à 1,5 tonnes</li>
            <li>Deux axes de déplacement X et Y</li>
            <li>Suivant un cheminement de QR codes (tags) au sol, lus par caméra</li>
            <li>Détection des obstacles par caméra et parechocs (pneumatiques)</li>
            <li>Se recharge sur des bornes électriques</li>
    <!-- LE FLASH RECENT -->
    <h3 id="flashTitle" class="animated-flash" onclick="openFlashPDF()">LE FLASH RECENT</h3>

	<h3>
    		<a href="animation.html?showAnimation=true" style="cursor: pointer; text-decoration: none; color: blue;">
        	Comment est-ce qu'on donne les commandes aux butlers?
   		 </a>
	</h3>

	<!-- Zones de déplacement -->
	<h3 id="zonesTitle" style="cursor: pointer;" onclick="toggleContent('zonesContent')">Zones de déplacement</h3>
	<div id="zonesContent" style="display: none;">
    		<img src="Layout.png" alt="Image 1" width="500px">
    		<p>Nous roulons sur les MV1/2/3/4/5, HC1 + toutes les zones de kit, jusqu'au TK!</p>
    		<p>Distance maximale: 1km!</p>
	</div>

        <!-- Les tags -->
	<h3 id="tagsTitle" style="cursor: pointer;" onclick="toggleContent('tagsContent')">Les tags</h3>
	<div id="tagsContent" style="display: none;">
    		<img src="Photo_tag.jpeg" alt="Image 2" width="100px">
    		<ul>
        		<li>Vous voyez ces QR codes partout dans notre atelier?</li>
        		<li>Ils servent à indiquer les chemins et la direction aux butler.</li>
    		</ul>
	</div>

        <!-- Contact -->
	<h3 id="contactTitle" style="cursor: pointer;" onclick="toggleContent('contactContent')">Contact</h3>
	<div id="contactContent" style="display: none;">
    		<p><strong>Chef de projet :</strong></p>
    		<p>Simon Poquet 0668241247</p>
    		<p><strong>Techniciens :</strong></p>
    		<p>Gary Marinot 0672831967, Sezer Binen 0637964422</p>
    		<p><strong>Stagiaire :</strong></p>
    		<p>Haiquan Liu 0669642070</p>
	</div>
    <script>
        // Fonction pour fermer la boîte modale
        function closeModal() {
            document.getElementById("modal").style.display = "none";
        }

        // Fonction pour récupérer le paramètre URL "MachineID"
        function getQueryParam(param) {
            let urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Affichage de la version Lite avec MachineID personnalisé et image en mouvement
        function showLite() {
            var machineID = getQueryParam("MachineID");
            var machineNames = {
                35: "Seize",
                40: "Adil",
                42: "Lilouch",
                57: "Saoudi",
                58: "Emilie",
                66: "Haiquan",
                70: "Stéphane",
                81: "Merguez",
                83: "Mickael",
                88: "Guofeng",
                89: "Grincheu",
                98: "Rogerio",
                100: "Simon",
                102: "Le magicien",
                121: "Caro",
                128: "Sam",
                142: "Bayram",
                164: "Mickey"
            };

            var machineName = machineNames[machineID] || "MachineID inconnu";
            document.getElementById("machineIDText").innerHTML = "Hello, je suis : " + machineName + " Butler " + machineID + "!";

            // Affiche et démarre le mouvement de l'image
            var image = document.getElementById("movingImage");
            image.style.display = "block";
            setInterval(moveImageRandomly, 2000);
        }

        // Fonction pour déplacer l'image de manière aléatoire
        function moveImageRandomly() {
            var image = document.getElementById("movingImage");
            var x = Math.random() * (window.innerWidth - 100);  // Déplacement sur toute la largeur
            var y = Math.random() * (window.innerHeight - 100); // Déplacement sur toute la hauteur
            image.style.left = x + "px";
            image.style.top = y + "px";
        }

        // Fonction pour capturer l'image et afficher le message
        function catchImage() {
            var image = document.getElementById("movingImage");
            var machineID = getQueryParam("MachineID");
            var machineName = document.getElementById("machineIDText").textContent.split(":")[1].trim();
            alert(machineName + " attrapé !");
            image.style.display = "none";
        }

        // Fonction pour afficher les options de dépannage
        function showDepannageOptions() {
            document.getElementById("depannageOptions").style.display = "block";
        }

        // Fonction pour rediriger vers le bon PDF selon le choix
        function handleDepannage() {
            var problemSelect = document.getElementById("problemSelect").value;
            
            if (problemSelect === "1") {
                window.location.href = "Leçon ponctuelle _ Lumière rouge.pdf";
            } else if (problemSelect === "2") {
                window.location.href = "Leçon ponctuelle _ Lumière jaune et violette.pdf";
            } else if (problemSelect === "3") {
                window.location.href = "Leçon ponctuelle _ Lumière bleue.pdf";
            } else {
                alert("Veuillez sélectionner une option valide.");
            }
        }
	// Fonction pour basculer la visibilité du contenu
	function toggleContent(contentId) {
    		const content = document.getElementById(contentId);
    		if (content.style.display === "none") {
        		content.style.display = "block";
    		} else {
        		content.style.display = "none";
    		}
	}


        // Charger la version Lite au chargement de la page
        window.onload = function() {
            showLite();  // Appel direct de showLite
            var machineID = getQueryParam("MachineID");
            document.getElementById("normalVersionLink").href = "https://apps.powerapps.com/play/1c66268e-c967-4e77-82e1-1e303906f884?MachineID=" + machineID;
        }
	// Fonction pour ouvrir le fichier PDF "flash.pdf"
        function openFlashPDF() {
            window.open('Flash.pdf', '_blank'); // Ouvre le fichier PDF dans un nouvel onglet
        }

    </script>
</body>
</html>
